# 项目中如何解决高并发问题
-- -
**系统分析原则--如何从全局掌握一个大型系统**
-- -
1. 高并发原则
-- -
**垂直扩展：** 提高技术或者升级硬件
**水平扩展：** 增加服务器节点横向扩展系统性能；分布式，集群

具体来讲：
* 使用缓存减少数据路库的访问
* 用熔断或降级提高响应速度
* 通过流量削峰等手段在项目入口限流
* 先拆分项目或使用微服务技术快速构建功能模块

衡量高并发的指标：
* 响应时间
* 吞吐量：单位时间内处理请求的个数
* 并发用户数量
2. 容错原则
-- -
3. CAP原则
-- -
4. 幂等性原则
-- -
5. 可扩展原则
-- -
6. 可维护原则和可监控原则

## 处理高并发问题的方法
1. 使用静态页面
2. 缓存方面
   * 将有时效性或者经常访问的数据存储到缓存中，减少数据库的访问次数
     * 本地缓存：cache
     * 分布式缓存：redis
3. 优化数据库方面（SQL优化）
   * 优化数据库结构，如索引 
   * 复杂sql语句不使用orm
   * 数据库读写分离，主数据库服务器负责写，从数据库服务器负责读，通过设置**主从复制原则**保证数据完整性
   * 对表分区
   * 升级数据库硬件
   * 表设计符合 三范式
   * 添加 事务 等
4. 负载均衡
    
在一台服务器，通过nginx挂载不同的服务，请求时讲不同的ip发送到不同的服务上
5. 动静分离
   * 图片服务器分离
   * 静态资源存在CDN服务器上 
6. 多用异步请求，少用同步请求